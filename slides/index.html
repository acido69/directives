<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>AngularJS - Training</title>

        <meta name="description" content="AngulaJS Directives">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h1>Directives</h2>
                    <small>AngularJS</small>
                </section>
                <section>
                    <small>Descripción</small>
                    <h2>XML DOM - El objeto <a href="http://www.w3schools.com/dom/dom_element.asp">Element</a></h2>
                    <p class="fragment fade-in">« estilo »</p>
                    <p class="fragment fade-in">« template »</p>
                    <p class="fragment fade-in">« comportamiento »</p>
                    <small class="fragment em2 fade-in">« Interactua con el controlador mediante el $scope »</small>
                </section>
                <section>
                    <section>
                        <small>Ejercicio 1</small>
                        <h2>Mi primera directiva</h2>
                        <p>¡Hello world!</p>
                    </section>
                    <section>
                        <h2>Conceptos básicos</h2>
                    </section>
                    <section>
                        <small>Conceptos básicos</small>
                        <h3>Convención de nombres</h3>
                        <pre><code>app.directive('ngBind', [...])</code></pre>
<pre class="fragment fade-in"><code><span ng-bind="name"></span>
<span ng:bind="name"></span>
<span ng_bind="name"></span>
<span data-ng-bind="name"></span>
<span x-ng-bind="name"></span> </code></pre>
                    </section>
                    <section>
                        <small>Conceptos básicos</small>
                        <h3>Renderizado</h3>
<pre><code><my-dir></my-dir>
<span my-dir="exp"></span>
<!-- directive: my-dir exp -->
<span class="my-dir: exp;"></span> </code></pre>
                    </section>
                    <section>
                        <small>Conceptos básicos</small>
                        <h3>Element</h3>
                        <i>
                            jQuery
                            &nbsp;&nbsp;&nbsp;
                            ?
                            &nbsp;&nbsp;&nbsp;
                            <a href="http://jquery.com/" target="blank">jQuery</a>
                            &nbsp;&nbsp;&nbsp;
                            :
                            &nbsp;&nbsp;&nbsp;
                            <a href="http://docs.angularjs.org/api/angular.element" target="blank">jqLite</a>
                        </i>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Estructura de una directiva</h2>
                        <ul>
                            <li>
                                Se crea una directiva mediante una función
                                que retorna un objeto de configuración
                            </li>
                            <li>
                                las opciones obligatorias, van en función de las necesidades
                            </li>
                            <li>
                                La opción de "postLink" es la más utilizada en las directivas
                            </li>
                        </ul>


                    </section>
                    <section>
                        <small>Estructura de una directiva</small>
                        <h3>Version extendida</h3>
<pre><code class="javascript">
var myModule = angular.module(...);

myModule.directive('directiveName', function factory(injectables) {
  var directiveDefinitionObject = {
    priority: 0,
    template: '<div></div>', // or // function(tElement, tAttrs) { ... },
    // or
    // templateUrl: 'directive.html', // or // function(tElement, tAttrs) { ... },
    replace: false,
    transclude: false,
    restrict: 'A',
    scope: false,
    controller: function($scope, $element, $attrs, $transclude, otherInjectables) { ... },
    require: 'siblingDirectiveName', // or // ['^parentDirectiveName', '?optionalDirectiveName', '?^optionalParent'],
    compile: function compile(tElement, tAttrs, transclude) {
      return {
        pre: function preLink(scope, iElement, iAttrs, controller) { ... },
        post: function postLink(scope, iElement, iAttrs, controller) { ... }
      }
      // or
      // return function postLink( ... ) { ... }
    },
    // or
    // link: {
    //  pre: function preLink(scope, iElement, iAttrs, controller) { ... },
    //  post: function postLink(scope, iElement, iAttrs, controller) { ... }
    // }
    // or
    // link: function postLink( ... ) { ... }
  };
  return directiveDefinitionObject;
});
</code></pre>
                    </section>
                    <section>
                        <small>Estructura de una directiva</small>
                        <h3>Version mínima: template</h3>
                        <pre><code class="javascript">
app.directive('mydirective',function() {
  var mydirectiveConfiguration = {
    template: 'Name: {{customer.name}} Address: {{customer.address}}'
  };
  return mydirectiveConfiguration;
});
                        </code></pre>
                    </section>
                    <section>
                        <small>Estructura de una directiva</small>
                        <h3>Version mínima: postLink</h3>
                        <pre><code class="javascript">
app.directive('mydirective',function() {
  var mydirectiveConfiguration = {
    link: function(scope, iElement, iAttrs, controller){
        iElement.addClass('mydirective')
    }
  };
  return mydirectiveConfiguration;
});
                        </code></pre>
                    </section>
                </section>
                <section>
                    <h2>Atributos del DOM</h2>
                    <p>Utilizamos los atributos del elemento para configurar la directiva</p>
                    <pre><code>
<mydirective data-optiona="a" data-optionb="b"></mydirective>
                    </code></pre>
                    <pre><code class="javascript">
app.directive('mydirective',function() {
  var mydirectiveConfiguration = {
    link: function(scope, iElement, iAttrs, controller){
        console.log(iAttrs.optiona);
        console.log(iAttrs.optionb);
    }
  };
  return mydirectiveConfiguration;
});
</code></pre>
                </section>
                <section>
                    <section>
                        <h2>$scope</h2>
                        <p><small>AKA: model, view, view-data, ...</small></p>
                        <ul>
                            <li>podemos usar...</li>
                            <li>el del padre(por defecto) <pre><code class="javascript">scope:false</code></pre> </li>
                            <li>crear uno nuevo basado en el padre <pre><code class="javascript">scope:true</code></pre></li>
                            <li>uno totalmente nuevo <pre><code class="javascript">scope:{...}</code></pre></li>
                        <ul>
                    </section>
                    <section>
                        <span><small>$scope</small></span>
                        <h3>Atributos del DOM  + $scope</h3>
                        <p>
                            Cuando creamos un nuevo $scope,
                            enlazamos los atributos del nuevo $scope con los del elemento DOM
                        </p>
                    </section>
                    <section>
                        <span><small>$scope</small></span>
                        <h3>@ / @attr</h3>
                        <p>Admite sólo valores tipo strings, es como si fuera el valor del atributo tal cual e incluye el parseo</p>
                        <pre><code>
<mydirective data-optiona="a" data-optionb="b and {{c}}"></mydirective>
</code></pre>
                        <pre><code class="javascript">
app.directive('mydirective',function() {
  var mydirectiveConfiguration = {
    template:'A => "{{opitiona}}" | B => "{{otherOption}}"',
    scope: {opitiona:'@', otherOption:'@optionb'}
  };
  return mydirectiveConfiguration;
});
</code></pre>
                    </section>
                    <section>
                        <span><small>$scope</small></span>
                        <h3>= / =attr</h3>
                        <p>Crea un enlace bi-direccional con el valor del atributo</p>
                        <p>El valor es una referencia al atributo del $scope padre</p>

                        <pre><code>
<mydirective data-optiona="parentOptionA" data-optionb="parentOptionB"></mydirective>
</code></pre>
                        <pre><code class="javascript">
app.directive('mydirective',function() {
  var mydirectiveConfiguration = {
    template:'A => "{{opitiona}}" | B => "{{otherOption}}"',
    scope: {opitiona:'=', otherOption:'=optionB'}
  };
  return mydirectiveConfiguration;
});
</code></pre>
                        <p><small>Si no existe el atributo en el elemento DOM dará una excepción "NON_ASSIGNABLE_MODEL_EXPRESSION"; en caso de
                        que el atributo sea opcional se tendrá que añadir el caracter "=?"</small></p>
                    </section>
                    <section>
                        <span><small>$scope</small></span>
                        <h3>& / &attr</h3>
                        <p>Referencia al modelo del padre; se suele usar con métodos definidos en el $scope del padre</p>
                        <pre><code>
<mydirective data-optiona="parentOptionMethodA"></mydirective>
</code></pre>
                        <pre><code class="javascript">
app.directive('mydirective',function() {
  var mydirectiveConfiguration = {
    scope: {opitiona:'&'},
    link: function(scope, iElement, attrs){
        console.log( scope.optionaa() );
    }
  };
  return mydirectiveConfiguration;
});
</code></pre>
                    </section>
                </section>
            </div>

        </div>
        <!--
        <div class="share-reveal" style="position: absolute; bottom: 14px; width:100%; text-align:center; z-index: 20; color:grey">
            <i>jimmy collazos // <a href="#" style="color:grey; text-decoration:none">@acido69</a> </i>
        </div>
        -->

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
                ]
            });

        </script>

    </body>
</html>
